<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Table Creation | A Comparison of Carnivore Monitoring Techniques</title>
  <meta name="description" content="<p>This book was created as a part of my final project for Simona Picardi’s
Reproducible Data Science Class. It will outline the steps of my final project.</p>" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Table Creation | A Comparison of Carnivore Monitoring Techniques" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This book was created as a part of my final project for Simona Picardi’s
Reproducible Data Science Class. It will outline the steps of my final project.</p>" />
  <meta name="github-repo" content="https://github.com/lengelbert/bookdown_website.git" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Table Creation | A Comparison of Carnivore Monitoring Techniques" />
  
  <meta name="twitter:description" content="<p>This book was created as a part of my final project for Simona Picardi’s
Reproducible Data Science Class. It will outline the steps of my final project.</p>" />
  

<meta name="author" content="Lindsey Engelbert" />


<meta name="date" content="2023-04-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="cleaning-the-raw-data.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Project Description</a></li>
<li class="chapter" data-level="2" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html"><i class="fa fa-check"></i><b>2</b> Designing and Building my Database</a>
<ul>
<li class="chapter" data-level="2.1" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#database-structure"><i class="fa fa-check"></i><b>2.1</b> Database structure</a></li>
<li class="chapter" data-level="2.2" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#creating-the-database"><i class="fa fa-check"></i><b>2.2</b> Creating the database</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#creating-the-carnivores-table"><i class="fa fa-check"></i><b>2.2.1</b> Creating the carnivores table</a></li>
<li class="chapter" data-level="2.2.2" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#creating-the-collars-table"><i class="fa fa-check"></i><b>2.2.2</b> Creating the collars table</a></li>
<li class="chapter" data-level="2.2.3" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#creating-the-deployments-table"><i class="fa fa-check"></i><b>2.2.3</b> Creating the deployments table</a></li>
<li class="chapter" data-level="2.2.4" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#creating-the-raw-gps-data-table"><i class="fa fa-check"></i><b>2.2.4</b> Creating the raw GPS data table</a></li>
<li class="chapter" data-level="2.2.5" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#creating-the-capture-sites-table"><i class="fa fa-check"></i><b>2.2.5</b> Creating the capture sites table</a></li>
<li class="chapter" data-level="2.2.6" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#creating-the-captures-table"><i class="fa fa-check"></i><b>2.2.6</b> Creating the captures table</a></li>
<li class="chapter" data-level="2.2.7" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#creating-the-sampling-cells-table"><i class="fa fa-check"></i><b>2.2.7</b> Creating the sampling cells table</a></li>
<li class="chapter" data-level="2.2.8" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#creating-the-sampling-periods-table"><i class="fa fa-check"></i><b>2.2.8</b> Creating the sampling periods table</a></li>
<li class="chapter" data-level="2.2.9" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#creating-the-cameras-table"><i class="fa fa-check"></i><b>2.2.9</b> Creating the cameras table</a></li>
<li class="chapter" data-level="2.2.10" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#creating-the-photos-table"><i class="fa fa-check"></i><b>2.2.10</b> Creating the photos table</a></li>
<li class="chapter" data-level="2.2.11" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#creating-the-transects-table"><i class="fa fa-check"></i><b>2.2.11</b> Creating the transects table</a></li>
<li class="chapter" data-level="2.2.12" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#creating-the-scat-samples-table"><i class="fa fa-check"></i><b>2.2.12</b> Creating the scat samples table</a></li>
<li class="chapter" data-level="2.2.13" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#creating-the-hair-snares-table"><i class="fa fa-check"></i><b>2.2.13</b> Creating the hair snares table</a></li>
<li class="chapter" data-level="2.2.14" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#creating-the-hair-samples-table"><i class="fa fa-check"></i><b>2.2.14</b> Creating the hair samples table</a></li>
<li class="chapter" data-level="2.2.15" data-path="designing-and-building-my-database.html"><a href="designing-and-building-my-database.html#creating-the-genetics-table"><i class="fa fa-check"></i><b>2.2.15</b> Creating the genetics table</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="cleaning-the-raw-data.html"><a href="cleaning-the-raw-data.html"><i class="fa fa-check"></i><b>3</b> Cleaning the raw data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="cleaning-the-raw-data.html"><a href="cleaning-the-raw-data.html#preliminary-steps"><i class="fa fa-check"></i><b>3.1</b> Preliminary steps</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="cleaning-the-raw-data.html"><a href="cleaning-the-raw-data.html#load-libraries"><i class="fa fa-check"></i><b>3.1.1</b> Load Libraries</a></li>
<li class="chapter" data-level="3.1.2" data-path="cleaning-the-raw-data.html"><a href="cleaning-the-raw-data.html#database-connection"><i class="fa fa-check"></i><b>3.1.2</b> Database connection</a></li>
<li class="chapter" data-level="3.1.3" data-path="cleaning-the-raw-data.html"><a href="cleaning-the-raw-data.html#import-the-raw-data"><i class="fa fa-check"></i><b>3.1.3</b> Import the raw data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="table-creation.html"><a href="table-creation.html"><i class="fa fa-check"></i><b>4</b> Table Creation</a>
<ul>
<li class="chapter" data-level="4.0.1" data-path="table-creation.html"><a href="table-creation.html#create-the-carnivores-table"><i class="fa fa-check"></i><b>4.0.1</b> Create the carnivores table</a></li>
<li class="chapter" data-level="4.0.2" data-path="table-creation.html"><a href="table-creation.html#add-data-to-carnivores-table"><i class="fa fa-check"></i><b>4.0.2</b> Add data to carnivores table</a></li>
<li class="chapter" data-level="4.0.3" data-path="table-creation.html"><a href="table-creation.html#create-the-collars-table"><i class="fa fa-check"></i><b>4.0.3</b> Create the collars table</a></li>
<li class="chapter" data-level="4.0.4" data-path="table-creation.html"><a href="table-creation.html#add-data-to-collars-table"><i class="fa fa-check"></i><b>4.0.4</b> Add data to collars table</a></li>
<li class="chapter" data-level="4.0.5" data-path="table-creation.html"><a href="table-creation.html#create-the-capture-sites-table"><i class="fa fa-check"></i><b>4.0.5</b> Create the capture sites table</a></li>
<li class="chapter" data-level="4.0.6" data-path="table-creation.html"><a href="table-creation.html#add-data-to-capture_sites-table"><i class="fa fa-check"></i><b>4.0.6</b> Add data to capture_sites table</a></li>
<li class="chapter" data-level="4.0.7" data-path="table-creation.html"><a href="table-creation.html#create-the-gps-data-table"><i class="fa fa-check"></i><b>4.0.7</b> Create the GPS data table</a></li>
<li class="chapter" data-level="4.0.8" data-path="table-creation.html"><a href="table-creation.html#add-data-to-gps-data-table"><i class="fa fa-check"></i><b>4.0.8</b> Add data to GPS data table</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Comparison of Carnivore Monitoring Techniques</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="table-creation" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Table Creation<a href="table-creation.html#table-creation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Now that I’ve completed these preliminary steps, I can create my tables and add
them to my monitoring techniques database.</p>
<div id="create-the-carnivores-table" class="section level3 hasAnchor" number="4.0.1">
<h3><span class="header-section-number">4.0.1</span> Create the carnivores table<a href="table-creation.html#create-the-carnivores-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Convert the appropriate data from the raw Wildlife Tracker csv into the
carnivores table format.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="table-creation.html#cb21-1" aria-hidden="true" tabindex="-1"></a>carnivores <span class="ot">&lt;-</span> raw_data <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="table-creation.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(uniqueID, earTag, sex, birthYear, currentCohort, species) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="table-creation.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">carnivore_id =</span> uniqueID, </span>
<span id="cb21-4"><a href="table-creation.html#cb21-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">ear_tag =</span> earTag, </span>
<span id="cb21-5"><a href="table-creation.html#cb21-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">birth_year =</span> birthYear,</span>
<span id="cb21-6"><a href="table-creation.html#cb21-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">age_class =</span> currentCohort) <span class="sc">%&gt;%</span></span>
<span id="cb21-7"><a href="table-creation.html#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(age_class) <span class="sc">%&gt;%</span></span>
<span id="cb21-8"><a href="table-creation.html#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">duplicated</span>(carnivore_id)) <span class="sc">%&gt;%</span></span>
<span id="cb21-9"><a href="table-creation.html#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">gsub</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;&quot;</span>, species))</span></code></pre></div>
<p>Tips:
The <code>select()</code> function selects the columns you want from the raw data to use
in the table you’re creating.</p>
<p>The <code>rename()</code> function allows you to rename columns so that they match the
corresponding column names in the database table.</p>
<p>The <code>arrange()</code> function organizes the field in ascending order.</p>
<p><code>filter(!duplicated(carnivore_id))</code> Here I filtered the data by carnivore_id and
had it not include duplicated carnivores. I did this instead of distinct because
Wildlife Tracker calculates the age class based on the birth year so there were
duplicate rows for individuals because the collar had been on them for multiple
age classes.</p>
<p><code>mutate(species = gsub(" ", "", species))</code> This line deleted all spaces between
characters in the field so that it fits the conditions specified for my carnivore
table. <code>gsub()</code> is the function that replaces the spaces and I paired it with
<code>mutate()</code> so that it would replace the existing species column.</p>
</div>
<div id="add-data-to-carnivores-table" class="section level3 hasAnchor" number="4.0.2">
<h3><span class="header-section-number">4.0.2</span> Add data to carnivores table<a href="table-creation.html#add-data-to-carnivores-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here I added the existing data to the carnivores table in the montech.db.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="table-creation.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(montech_db, <span class="st">&quot;carnivores&quot;</span>, carnivores, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<ul>
<li>Use append if only adding new data, use overwrite if adding everything.</li>
</ul>
</div>
<div id="create-the-collars-table" class="section level3 hasAnchor" number="4.0.3">
<h3><span class="header-section-number">4.0.3</span> Create the collars table<a href="table-creation.html#create-the-collars-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Convert the appropriate data from the raw Wildlife Tracker csv into the
collars table format.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="table-creation.html#cb23-1" aria-hidden="true" tabindex="-1"></a>collars <span class="ot">&lt;-</span> raw_data <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="table-creation.html#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(collarID, freq) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="table-creation.html#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">brand =</span> <span class="cn">NA</span>, <span class="at">model =</span> <span class="cn">NA</span>, <span class="at">status =</span> <span class="cn">NA</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="table-creation.html#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(freq, <span class="at">.after =</span> status) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="table-creation.html#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">collar_id =</span> collarID, </span>
<span id="cb23-6"><a href="table-creation.html#cb23-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">frequency =</span> freq) <span class="sc">%&gt;%</span></span>
<span id="cb23-7"><a href="table-creation.html#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code></pre></div>
<p>Tip:
The <code>relocate()</code>function allows you to switch around the order of the columns.
Note that you can only relocate one column at a time.</p>
</div>
<div id="add-data-to-collars-table" class="section level3 hasAnchor" number="4.0.4">
<h3><span class="header-section-number">4.0.4</span> Add data to collars table<a href="table-creation.html#add-data-to-collars-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here I added the existing data to the collars table in the montech.db.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="table-creation.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(montech_db, <span class="st">&quot;collars&quot;</span>, collars, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="create-the-capture-sites-table" class="section level3 hasAnchor" number="4.0.5">
<h3><span class="header-section-number">4.0.5</span> Create the capture sites table<a href="table-creation.html#create-the-capture-sites-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Convert the appropriate data from the raw Wildlife Tracker csv into the
capture sites table format.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="table-creation.html#cb25-1" aria-hidden="true" tabindex="-1"></a>capture_sites <span class="ot">&lt;-</span> raw_data <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="table-creation.html#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(captureUnit, captureSubUnit, realCaptureArea) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="table-creation.html#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">capture_unit =</span> captureUnit, </span>
<span id="cb25-4"><a href="table-creation.html#cb25-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">capture_subunit =</span> captureSubUnit,</span>
<span id="cb25-5"><a href="table-creation.html#cb25-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">capture_area =</span> realCaptureArea) <span class="sc">%&gt;%</span></span>
<span id="cb25-6"><a href="table-creation.html#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(capture_area, <span class="at">.before =</span> capture_unit) <span class="sc">%&gt;%</span> </span>
<span id="cb25-7"><a href="table-creation.html#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(capture_subunit, <span class="at">.after =</span> capture_area) <span class="sc">%&gt;%</span></span>
<span id="cb25-8"><a href="table-creation.html#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">capture_area =</span> <span class="fu">gsub</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;&quot;</span>, capture_area)) <span class="sc">%&gt;%</span></span>
<span id="cb25-9"><a href="table-creation.html#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">capture_unit =</span> <span class="fu">gsub</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;&quot;</span>, capture_unit)) <span class="sc">%&gt;%</span></span>
<span id="cb25-10"><a href="table-creation.html#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code></pre></div>
</div>
<div id="add-data-to-capture_sites-table" class="section level3 hasAnchor" number="4.0.6">
<h3><span class="header-section-number">4.0.6</span> Add data to capture_sites table<a href="table-creation.html#add-data-to-capture_sites-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here I added the existing data to the capture_sites table in the montech.db.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="table-creation.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(montech_db, <span class="st">&quot;capture_sites&quot;</span>, capture_sites, <span class="at">append =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="create-the-gps-data-table" class="section level3 hasAnchor" number="4.0.7">
<h3><span class="header-section-number">4.0.7</span> Create the GPS data table<a href="table-creation.html#create-the-gps-data-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Converting the appropriate data from the raw Wildlife Tracker csv into the
GPS table format.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="table-creation.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Grab the columns you want from the raw data and format them</span></span>
<span id="cb27-2"><a href="table-creation.html#cb27-2" aria-hidden="true" tabindex="-1"></a>gps_data <span class="ot">&lt;-</span> raw_data <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="table-creation.html#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(collarID, dateYearAndJulian, latitude, longitude) <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="table-creation.html#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">collar_id =</span> collarID, </span>
<span id="cb27-5"><a href="table-creation.html#cb27-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">timestamp =</span> dateYearAndJulian) <span class="sc">%&gt;%</span></span>
<span id="cb27-6"><a href="table-creation.html#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(longitude, <span class="at">.before =</span> latitude) <span class="sc">%&gt;%</span></span>
<span id="cb27-7"><a href="table-creation.html#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">timestamp =</span> <span class="fu">mdy_hm</span>(timestamp, <span class="at">tz =</span> <span class="st">&quot;America/Denver&quot;</span>)) </span>
<span id="cb27-8"><a href="table-creation.html#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="table-creation.html#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a spatial object, convert it to UTM, and take just the coordinate columns</span></span>
<span id="cb27-10"><a href="table-creation.html#cb27-10" aria-hidden="true" tabindex="-1"></a>utm_coords <span class="ot">&lt;-</span> gps_data <span class="sc">%&gt;%</span> </span>
<span id="cb27-11"><a href="table-creation.html#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>), <span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-12"><a href="table-creation.html#cb27-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="at">crs =</span> <span class="dv">32612</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-13"><a href="table-creation.html#cb27-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_coordinates</span>()</span>
<span id="cb27-14"><a href="table-creation.html#cb27-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-15"><a href="table-creation.html#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Add those columns back to the original object and format them</span></span>
<span id="cb27-16"><a href="table-creation.html#cb27-16" aria-hidden="true" tabindex="-1"></a>gps_data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(gps_data, utm_coords) <span class="sc">%&gt;%</span></span>
<span id="cb27-17"><a href="table-creation.html#cb27-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(collar_id, timestamp, X, Y) <span class="sc">%&gt;%</span></span>
<span id="cb27-18"><a href="table-creation.html#cb27-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">utm_x =</span> X, <span class="at">utm_y =</span> Y)</span></code></pre></div>
<p>Tip:</p>
<p><code>mutate(timestamp = mdy_hm(timestamp, tz = "America/Denver))</code>
Here I am telling r that the timestamp column is a time and date, as well as what
the format of that time and date is and the timezone.</p>
</div>
<div id="add-data-to-gps-data-table" class="section level3 hasAnchor" number="4.0.8">
<h3><span class="header-section-number">4.0.8</span> Add data to GPS data table<a href="table-creation.html#add-data-to-gps-data-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here I added the existing data to the gps data table in the montech.db.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="table-creation.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(montech_db, <span class="st">&quot;gps_data&quot;</span>, gps_data, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="cleaning-the-raw-data.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/GPS_Data_Conversion.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
